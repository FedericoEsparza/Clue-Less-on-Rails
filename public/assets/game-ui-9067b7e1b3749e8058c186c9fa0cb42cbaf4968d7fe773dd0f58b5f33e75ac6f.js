function setSuccessMsg(e){$("#notificationArea").html('<div class="alert alert-success alert-dismissible">\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close">&times;</button>\n'+e+"\n</div>\n")}function setErrorMsg(e){$("#notificationArea").html('<div class="alert alert-danger alert-dismissible">\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close">&times;</button>\n'+e+"\n</div>\n")}function setStatusMessage(e){$("#status-message").html(e)}function setMove(e){var s=$("#moveModalBody .form-control");s.html("");for(var t=0;t<e.length;t++)s.append($("<option>",{text:e[t]}))}function setDisproveCards(e){var s=$("#disproveSuggestionModalBody .form-control");s.html("");for(var t=0;t<e.length;t++)s.append($("<option>",{text:e[t]}))}function setActions(e,s){if("SETUP"==s?($("#clue-actions .setup-phase").removeClass("hidden"),$("#clue-actions .active-phase").addClass("hidden")):"ACTIVE"!=s&&"ACTIVE_SUGGESTION"!=s||($("#clue-actions .setup-phase").addClass("hidden"),$("#clue-actions .active-phase").removeClass("hidden")),"AddPlayer"in e?$("#addPlayerBtn").prop("disabled",!1):$("#addPlayerBtn").prop("disabled",!0),"SetToken"in e){$("#setTokenBtn").prop("disabled",!1);var t=e.SetToken;t.indexOf("Ms. Scarlet")>=0?$("#setTokenModalBody option")[0].disabled=!1:$("#setTokenModalBody option")[0].disabled=!0,t.indexOf("Col. Mustard")>=0?$("#setTokenModalBody option")[1].disabled=!1:$("#setTokenModalBody option")[1].disabled=!0,t.indexOf("Mrs. White")>=0?$("#setTokenModalBody option")[2].disabled=!1:$("#setTokenModalBody option")[2].disabled=!0,t.indexOf("Mr. Green")>=0?$("#setTokenModalBody option")[3].disabled=!1:$("#setTokenModalBody option")[3].disabled=!0,t.indexOf("Mrs. Peacock")>=0?$("#setTokenModalBody option")[4].disabled=!1:$("#setTokenModalBody option")[4].disabled=!0,t.indexOf("Prof. Plum")>=0?$("#setTokenModalBody option")[5].disabled=!1:$("#setTokenModalBody option")[5].disabled=!0}else $("#setTokenBtn").prop("disabled",!0);"StartGame"in e?$("#startGameBtn").prop("disabled",!1):$("#startGameBtn").prop("disabled",!0),"Move"in e?($("#moveBtn").prop("disabled",!1),setMove(e.Move)):$("#moveBtn").prop("disabled",!0),"MakeSuggestion"in e?$("#makeSuggestionBtn").prop("disabled",!1):$("#makeSuggestionBtn").prop("disabled",!0),"DisproveSuggestion"in e?($("#disproveSuggestionBtn").prop("disabled",!1),setDisproveCards(e.DisproveSuggestion)):$("#disproveSuggestionBtn").prop("disabled",!0),"MakeAccusation"in e?$("#makeAccusationBtn").prop("disabled",!1):$("#makeAccusationBtn").prop("disabled",!0),"EndTurn"in e?$("#endTurnBtn").prop("disabled",!1):$("#endTurnBtn").prop("disabled",!0)}function setHand(e){console.log(e),$("#handModalBody img").addClass("hidden");for(var s=0;s<e.length;s++){var t=e[s];"Ms. Scarlet"==t?$("#msScarletCard").removeClass("hidden"):"Col. Mustard"==t?$("#colMustardCard").removeClass("hidden"):"Mrs. White"==t?$("#mrsWhiteCard").removeClass("hidden"):"Mr. Green"==t?$("#mrGreenCard").removeClass("hidden"):"Mrs. Peacock"==t?$("#mrsPeacockCard").removeClass("hidden"):"Prof. Plum"==t?$("#profPlumCard").removeClass("hidden"):"Candlestick"==t?$("#candlestickCard").removeClass("hidden"):"Knife"==t?$("#knifeCard").removeClass("hidden"):"Pipe"==t?$("#pipeCard").removeClass("hidden"):"Revolver"==t?$("#revolverCard").removeClass("hidden"):"Rope"==t?$("#ropeCard").removeClass("hidden"):"Wrench"==t?$("#wrenchCard").removeClass("hidden"):"Kitchen"==t?$("#kitchenCard").removeClass("hidden"):"Ballroom"==t?$("#ballroomCard").removeClass("hidden"):"Conservatory"==t?$("#conservatoryCard").removeClass("hidden"):"Dining room"==t?$("#diningRoomCard").removeClass("hidden"):"Billiard room"==t?$("#billiardRoomCard").removeClass("hidden"):"Library"==t?$("#libraryCard").removeClass("hidden"):"Lounge"==t?$("#loungeCard").removeClass("hidden"):"Hall"==t?$("#hallCard").removeClass("hidden"):"Study"==t&&$("#studyCard").removeClass("hidden")}0==e.length?$("#handModalBody span").text("You do not have any cards."):$("#handModalBody span").text("")}function setCharacter(e){""!=e?$("#clue-character").html("Your character: "+e):$("#clue-character").html("")}function setNotification(e){setSuccessMsg(e)}function updateChat(e){insert("chat",e.usermessage),id("userlist").innerHTML="",e.userlist.forEach(function(e){insert("userlist","<li>"+e+"</li>")})}function insert(e,s){id(e).insertAdjacentHTML("afterbegin",s)}function updateGame(e){setBoard(e.board),highlightCharacter(e.statusWho),setActions(e.action,e.status),setStatusMessage(e.statusMessage),""!=e.notification&&setNotification(e.notification),setHand(e.yourHand),setCharacter(e.yourCharacter)}$("#addPlayerBtn").click(function(e){$.post("/game/join",JSON.stringify({api:null}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully joined game")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when joining game")}),e.preventDefault()}),$("#setTokenModalOk").click(function(){var e=$("#setTokenModalBody").find(":selected").text();$.post("/game/token",JSON.stringify({api:null,who:e}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully set token.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when setting token.")})}),$("#moveModalOk").click(function(){var e=$("#moveModalBody").find(":selected").text();$.post("/game/move",JSON.stringify({api:null,to:e}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully set token.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when setting token.")})}),$("#makeSuggestionModalOk").click(function(){var e=$("#makeSuggestionModalBody .character-list").find(":selected").text(),s=$("#makeSuggestionModalBody .weapon-list").find(":selected").text();$.post("/game/suggest",JSON.stringify({api:null,character:e,weapon:s}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully set token.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when setting token.")})}),$("#disproveSuggestionModalOk").click(function(){var e=$("#disproveSuggestionModalBody").find(":selected").text();$.post("/game/disprove",JSON.stringify({api:null,card:e}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully set token.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when setting token.")})}),$("#makeAccusationModalOk").click(function(){var e=$("#makeAccusationModalBody .character-list").find(":selected").text(),s=$("#makeAccusationModalBody .weapon-list").find(":selected").text(),t=$("#makeAccusationModalBody .room-list").find(":selected").text();$.post("/game/accuse",JSON.stringify({api:null,character:e,weapon:s,room:t}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully set token.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when setting token.")})}),$("#startGameBtn").click(function(){$.post("/game/start",JSON.stringify({api:null}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully joined game.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when joining game.")})}),$("#endTurnBtn").click(function(){$.post("/game/endturn",JSON.stringify({api:null}),function(e){var s=JSON.parse(e),t=s.msg;setSuccessMsg(""!=t?t:"Successfully joined game.")}).fail(function(e){var s=JSON.parse(e.responseText),t=s.msg;setErrorMsg(""!=t?t:"Internal server error when joining game.")})});